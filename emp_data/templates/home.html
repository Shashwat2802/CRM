<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" content="width=device-width,initial-scale=1.0" />
  <title>{% block title %}Employee System{% endblock %}</title>
  {% load static %}
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
</head>

<body>
  <script>
    $(document).ready(function () {
      $.getJSON('/getMessagesJson/', function (data) {
        var messages = data.messages;
        console.log("Inside model", data)
        if (messages.length > 0) {
          $('#errorModal').modal('show');
          var modalBody = $('#errorModal .modal-body');
          modalBody.empty();
          var ul = $('<ul>');
          messages.forEach(function (message) {
            ul.append($('<li>').text(message));
          });
          modalBody.append(ul);
        }
      });
    });
  </script>
  <!-- Error Modal -->
  <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="errorModalLabel">Access Denied</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          {{ messages.get_messages }}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  {% if user.is_authenticated %}
  <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mynav" aria-controls="navbarNav"
      aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="mynav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" onclick="location.href='/'">Home</a>
        </li>
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Employees</a>
          <div class="dropdown-menu">
            <a class="dropdown-item" onclick="location.href='/listEmployeeFiltered/All/All/All'">View</a>
            <a class="dropdown-item" onclick="location.href='/addEmployee'">Add</a>
            <a class="dropdown-item" onclick="location.href='/bulkUploadEmployee'">Upload</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Customers</a>
          <div class="dropdown-menu">
            <a class="dropdown-item" onclick="location.href='/listCustomers'">View</a>
            <a class="dropdown-item" onclick="location.href='/addCustomer'">Add</a>
            <a class="dropdown-item" onclick="location.href='/customerDataUpload'">Upload</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Sales Reqs</a>
          <div class="dropdown-menu">
            <a class="dropdown-item" onclick="location.href='/listSalesReqsFiltered'">View</a>
            <a class="dropdown-item" onclick="location.href='/addSalesReqs'">Add</a>
            <a class="dropdown-item" onclick="location.href='/salesDataUpload'">Upload</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">TA</a>
          <div class="dropdown-menu">
            <a class="dropdown-item" onclick="location.href='/showTa/Choose/Choose/Choose'">View</a>
            <a class="dropdown-item" onclick="location.href='/addTa'">Add</a>
            <a class="dropdown-item" href="/taDataUpload">Upload</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">VM</a>
          <div class="dropdown-menu">
            <a class="dropdown-item" onclick="location.href='/showVm/Choose/Choose/Choose'">View</a>
            <a class="dropdown-item" onclick="location.href='/addVm'">Add</a>
            <a class="dropdown-item" onclick="location.href='/vmDataUpload'">Upload</a>
          </div>
        </li>
        <li class="nav-item dropdown">                
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Accounts</a>
          {% if user.is_superuser %}   
          <div class="dropdown-menu">            
            <a class="dropdown-item" onclick="location.href='/userAccounts'">User Accounts</a>           
          </div>  
          {% endif %}        
        </li>
      </ul>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item active">
          <a class="nav-link active" onclick="location.href='/PasswordChangeView'">
            <span class="btn btn-outline-info" text-align="right">Reset Password</span></a>
        </li>
        <li class="nav-item active">
          <a class="nav-link disabled" href="{% url 'logout' %}"><span class="btn btn-outline-info"
              text-align="right">LogOut</span></a>
        </li>
        <li class="nav-item active">
          <a class="nav-link active" onclick="location.href='admin/'">
            <span class="btn btn-outline-info" text-align="right">Go to Admin</span></a>
        </li>
      </ul>
    </div>
  </nav>
  <h5 style="color:rgba(41, 47, 43, 0.627);">Hi {{ user.username }}!</h5>
  <h3 style="color: rgb(45, 45, 32);">Welcome to the Employee Management System</h3>
  {% else %}
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <div style="padding-bottom: 20%;">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="#"> Employee Management system</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="{% url 'login' %}"><i class="fa fa-sign-in" aria-hidden="true"></i>User
              Login</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" onclick="location.href='/admin'"><i class="fa fa-sign-in" aria-hidden="true"></i>Admin
              Login</a>
          </li>
        </ul>
      </div>
    </nav>
    <br></br>
    <h2 style="color: rgb(28, 25, 20);font-family: sans-serif;text-align: center;padding-bottom: 5%;">Please Login to
      Employee Management System</h2>
  </div>
  {% endif %}
</body>

</html>